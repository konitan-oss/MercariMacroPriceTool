### タスク番号と目的
- TASK-06: 価格改定処理の堅牢化（リトライ、途中再開、証拠保存）を実装し、複数商品の連続処理でも止まりにくい状態にする。

### 実施内容・変更ファイル一覧
- Automation: 価格改定サイクルをリトライ対応にし、ステップ単位で再試行・セレクタ試行をログ出力。失敗時に StepFailedException を返し、スクリーンショット/HTML を保存できるよう SaveEvidenceAsync を追加。
- App: DataGridに実行結果/最終メッセージ/実行時刻を表示、リトライ回数・待機秒の入力を追加。チェック行を順次処理し、失敗しても継続。停止で全体キャンセル可。runstate.json に進捗を保存し、未完了なら未実行だけ再開。CSVに Step/RetryUsed/EvidencePath を追加。ログは `.local/logs`、証拠は `.local/logs/evidence` に保存。
- docs: RUNBOOK に複数実行・リトライ設定・途中再開・証拠保存場所を追記。

変更ファイル:
- docs/SELECTORS.md
- docs/RUNBOOK.md
- src/MercariMacroPriceTool.Automation/MercariAutomationService.cs
- src/MercariMacroPriceTool.Automation/SelectorsConfig.cs
- src/MercariMacroPriceTool.Automation/ListingItem.cs
- src/MercariMacroPriceTool.Automation/PriceUpdateOptions.cs
- src/MercariMacroPriceTool.Automation/PriceUpdateResult.cs（新規）
- src/MercariMacroPriceTool.Automation/StepFailedException.cs（新規）
- src/MercariMacroPriceTool.App/MainWindow.xaml
- src/MercariMacroPriceTool.App/MainWindow.xaml.cs
- src/MercariMacroPriceTool.App/ListingRow.cs
- reports/20251215-0239_TASK-06.md（本ファイル）

### 実行手順・コマンド、操作
- ビルド: `dotnet build MercariMacroPriceTool.sln`
- 価格改定の流れ:
  1. 「商品取得」で一覧を出し、対象にチェック。
  2. RatePercent/DailyDownYen/待機①/②/商品間待機/リトライ回数/リトライ待機秒を必要に応じて設定。
  3. 「価格改定を実行」を押下。上から順に処理し、失敗しても次へ進む。停止ボタンで全体キャンセル可。
  4. 結果は表の実行結果列と `.local/logs/YYYYMMDD-HHMM_price-run.csv` に記録（Step/RetryUsed/EvidencePath 付き）。失敗時のスクショ/HTML は `.local/logs/evidence/` に保存。
  5. 中断した場合でも `.local/runstate.json` が残り、再起動後に未実行だけ再開。

### 動作確認結果（OK/NG、再現手順）
- `dotnet build MercariMacroPriceTool.sln` : OK
- 実ブラウザでのリトライ/証拠保存/途中再開はログイン状態と実ページが必要なため手動確認前提。UIログ、CSV、`.local/logs/evidence/`、`.local/runstate.json` で確認してください。

### 既知の課題と次の一手
- DOM 変更時は docs/SELECTORS.md の候補を更新し、必要に応じてコード側の候補も追加する。
- 検索文字フィルタは未実装。
- runstate 再開は ItemId ベースで未実行だけを対象とする簡易方式。必要に応じて選択復元などの改善を検討。***
