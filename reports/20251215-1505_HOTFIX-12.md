## 目的
- 前回値下げ日時/額を推定ではなくDBに保存し、一覧に正しく表示する。
- リセット時も値下げ履歴を確実にクリアできるようにする。

## 実施内容
- Domain/Storage: ItemState に LastDownAmount/LastDownAt を追加。リポジトリでスキーマ拡張（既存DBに列が無ければ ALTER で追加）。Upsert/Get/Reset/日付更新で新列を扱うよう調整。
- UIモデル: ListingRow に LastDownAtText/LastDownAmount を追加（PrevDailyDownYen/UpdatedTextの表示は廃止）。
- DataGrid: 列を「チェック/商品名/商品価格/いいね数/前回値下げ日時/前回値下げ額/URL/実行結果/最終メッセージ/実行日付」に整理。
- 商品取得時: DBの LastDownAt/LastDownAmount を読み込んで一覧に反映（無ければ空/0）。
- 価格改定成功時: 実際の下げ幅(BasePrice-NewPrice)と実行時刻を DB に保存し、行にも反映。ログに `LastDown saved` を追加。
- リセット時: RunCount/LastRunDate に加え LastDownAmount/LastDownAt もクリアし、行に反映。

## 変更ファイル
- src/MercariMacroPriceTool.Domain/ItemState.cs
- src/MercariMacroPriceTool.Storage/ItemStateRepository.cs
- src/MercariMacroPriceTool.App/ListingRow.cs
- src/MercariMacroPriceTool.App/MainWindow.xaml
- src/MercariMacroPriceTool.App/MainWindow.xaml.cs

## 確認手順
1. `& "C:\Program Files\dotnet\dotnet.exe" build MercariMacroPriceTool.sln`
2. アプリ起動→商品取得：前回値下げ日時/額が表示（未実行は空/0）、列が指定順であることを確認。
3. 選択行をリセット：前回値下げ日時が空、額が0になることを確認。
4. 価格改定を1件成功させる→再取得：前回値下げ額が (BasePrice-NewPrice)、日時が実行時刻で表示されることを確認。

## 動作確認結果
- ビルド成功（警告: Automation内のObsolete Timeoutのみ、機能影響なし）。
- 前回値下げ日時/額の表示・リセット・成功更新をUIで確認（想定通り空/0→更新）。

## 既知の課題
- いいね数/更新日付の実取得は未着手（別タスクで対応予定）。
- 価格抽出0問題は別途対応中。***
